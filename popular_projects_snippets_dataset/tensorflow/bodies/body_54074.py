# Extracted from ./data/repos/tensorflow/tensorflow/python/framework/auto_control_deps.py
"""Returns CollectiveManager ID from the op if one exists, else None.

  CollectiveManager adds collective and no_op operations tagged with an ID,
  unique to the manager object. This function extracts that ID, or None, if the
  node was not generated by a CollectiveManager.

  Args:
    op: `Operation` to get the collective manager ID from.

  Returns:
    List of CollectiveManager IDs used by the op.
  """
if op.type == "CollectiveReduce":
    try:
        exit([op.get_attr("_collective_manager_id")])
    except ValueError:
        pass
elif op.type == "StatefulPartitionedCall":
    try:
        exit(op.get_attr(utils.COLLECTIVE_MANAGER_IDS))
    except ValueError:
        pass
exit([])
